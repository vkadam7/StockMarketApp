<!DOCTYPE html>
<html>
    <head>
        <link rel = "stylesheet" href = "/static/stylesheets/styles.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
    </head>
    <header>
        <div class = "login">
                <p><a href = "login">Login</a> or <a href = "register">Register</a></p>
        </div>
        <br>
        <div class = "navbar">
            <nav>
                <ul>
                    <li><a href = "home">Home</a></li>
                    <li><a href = "aboutus">About Us</a></li>
                    <li><a href = "information">Information</a></li>
                </ul>
            </nav>
            <form action="/stockSearch" method="post">
                <input type="search" name="searchTerm" placeholder="Find a stock..."
                        value="{{ request.form['searchTerm'] }}">
                <button>Search</button>
            </form>
        </div>
    </header>
    <body>
        <form action="/changeView" method="post">
            <div class="stockDisplay">
                <h1>{{ stock['name'] }}</h1>
                <h3>Headquarters: {{ stock['headquarters'] }}</h3>
                <h3>Listed at: {{ stock['listedAt'] }}</h3>
                <canvas id="stockChart" width="900" height="400"></canvas>
                <script>
                    var ctx = document.getElementById("stockChart").getContext("2d");
                    var stockChart = new Chart(ctx, {
                        type: "line",
                        data: {
                            labels: {{ dates | safe }},
                            datasets: [{
                                label: "Stock values",
                                data: {{ avgs | safe }},
                                fill: false,
                                borderColor: "rgb(20, 100, 50)",
                                lineTension: 0.1
                            }]
                        },
                        options: {
                            display: true
                        }
                    });
                </script>
            </div>
        </form>
    </body>
</html>